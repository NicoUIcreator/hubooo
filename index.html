<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Huboo ‚Äì Chuleta BDR (ES)</title>
  <meta name="description" content="Chuleta interactiva y responsive para tu primer d√≠a como BDR/BDM en Huboo: flujo log√≠stico, ICP, preguntas, m√©tricas, objeciones y glosario." />
  <style>
    :root{
      --bg:#0e1116; --muted:#1a1f29; --text:#e9eef5; --sub:#a9b4c3; --brand:#5dd39e; --accent:#46a0ff; --card:#131823; --good:#1ccb7a; --warn:#f5a623; --bad:#ff5a5f; --shadow:0 10px 30px rgba(0,0,0,.25)
    }
    .light{ --bg:#f8fafc; --muted:#e9eef5; --text:#0e1116; --sub:#344256; --brand:#2fb27d; --accent:#0b6bcb; --card:#ffffff; --shadow:0 10px 24px rgba(2,8,20,.08)}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font:500 15px/1.45 "Inter",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue","Arial",sans-serif;letter-spacing:.2px}
    a{color:var(--accent);text-decoration:none}
    .app{display:grid;grid-template-columns:280px 1fr;min-height:100dvh}
    nav{background:var(--card);border-right:1px solid var(--muted);padding:16px;position:sticky;top:0;height:100dvh}
    .brand{display:flex;align-items:center;gap:10px;margin-bottom:8px}
    .logo{width:28px;height:28px;border-radius:9px;background:linear-gradient(135deg,var(--brand),var(--accent));box-shadow:var(--shadow)}
    .brand h1{font-size:16px;margin:0}
    .sub{color:var(--sub);font-weight:600;font-size:12px}
    .navlinks{display:flex;flex-direction:column;gap:6px;margin-top:8px}
    .navlinks a{padding:10px 12px;border-radius:12px;background:transparent;color:var(--text);border:1px solid transparent}
    .navlinks a:hover{background:var(--muted)}
    .navlinks a.active{background:linear-gradient(180deg,var(--muted),transparent);border-color:var(--muted)}
    .topbar{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;background:var(--card);position:sticky;top:0;z-index:5;border-bottom:1px solid var(--muted); flex-wrap:wrap; gap:8px}
    .search{flex:1;display:flex;gap:8px;min-width:260px;max-width:720px;margin:0 12px}
    .search input{flex:1;padding:10px 12px;border-radius:12px;border:1px solid var(--muted);background:var(--bg);color:var(--text)}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border-radius:12px;border:1px solid var(--muted);background:var(--card);color:var(--text);cursor:pointer}
    .btn:hover{filter:brightness(1.05)}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:14px;padding:18px}
    .card{grid-column:span 12;background:var(--card);border:1px solid var(--muted);border-radius:18px;box-shadow:var(--shadow);padding:16px}
    .card h2{margin:0 0 8px;font-size:18px}
    .tag{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;border:1px solid var(--muted);background:var(--bg);font-size:12px}
    .row{display:flex;flex-wrap:wrap;gap:8px}
    .pill{padding:6px 10px;border:1px dashed var(--muted);border-radius:999px;font-size:12px}
    .kpi{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
    .kpi .item{background:var(--bg);border:1px dashed var(--muted);border-radius:14px;padding:10px}
    .flow{display:grid;gap:10px}
    .step{border:1px solid var(--muted);border-radius:14px;padding:12px;background:linear-gradient(180deg,transparent,rgba(255,255,255,.02))}
    .step header{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .step button{all:unset;cursor:pointer}
    .step .content{display:none;padding-top:8px;color:var(--sub)}
    .copy{cursor:pointer;border:1px solid var(--muted);padding:6px 10px;border-radius:10px}
    .ok{color:var(--good)} .warn{color:var(--warn)} .bad{color:var(--bad)}
    .accordion{border:1px solid var(--muted);border-radius:14px;overflow:hidden}
    .accordion details{border-top:1px solid var(--muted);background:var(--card)}
    .accordion details:first-child{border-top:none}
    summary{padding:12px 14px;cursor:pointer;font-weight:600}
    details .inner{padding:0 14px 14px;color:var(--sub)}
    .list{display:grid;gap:8px}
    .check{display:flex;align-items:center;gap:10px}
    .check input{width:18px;height:18px}
    .foot{padding:18px;text-align:center;color:var(--sub)}
    .badge{font-size:11px;padding:2px 8px;border-radius:8px;border:1px solid var(--muted)}
    .toolbar{display:flex;gap:8px;align-items:center}
    .mobilebar{display:none}
    .chips{display:flex;gap:8px;align-items:center;overflow:auto;padding:6px 0}
    .chip{white-space:nowrap;border:1px solid var(--muted);background:var(--bg);padding:6px 10px;border-radius:999px;cursor:pointer}
    .chip:hover{background:var(--muted)}

    @media (max-width: 980px){
      .app{grid-template-columns:1fr}
      nav{position:fixed;inset:0 40% 0 0;transform:translateX(-101%);transition:transform .3s ease;z-index:9}
      nav.open{transform:none}
      .mobilebar{display:flex}
    }
    /* Click-to-explain acronyms */
    .def{display:inline; border-bottom:2px dotted var(--accent); cursor:pointer; background:transparent; color:inherit; padding:0 2px; border-radius:4px}
    .def:hover{background:var(--muted)}
    .overlay{position:fixed; inset:0; background:rgba(0,0,0,.35); backdrop-filter:blur(2px); z-index:50}
    .overlay.hidden{display:none}
    .pop{position:fixed; left:50%; bottom:14px; transform:translateX(-50%); max-width:740px; width:calc(100% - 28px); background:var(--card); border:1px solid var(--muted); border-radius:16px; box-shadow:var(--shadow); z-index:51}
    .pop.hidden{display:none}
    .pop .h{display:flex; align-items:center; justify-content:space-between; gap:8px; padding:12px 14px; border-bottom:1px solid var(--muted)}
    .pop .b{padding:12px 14px; color:var(--sub)}
    .gitem{border:1px dashed var(--muted); border-radius:12px; padding:10px; background:var(--bg)}
    .gtitle{font-weight:700; margin-bottom:4px}
    .btnlink{display:inline-flex; align-items:center; gap:6px; padding:8px 10px; border-radius:10px; border:1px solid var(--muted); background:var(--bg); cursor:pointer}
    .glossary-tools{display:flex; gap:8px; align-items:center; margin:8px 0}
    .glossary-tools input{flex:1; padding:8px 10px; border-radius:10px; border:1px solid var(--muted); background:var(--bg); color:var(--text)}
  </style>
</head>
<body>
  <div class="app">
    <nav id="sidebar" aria-label="Navegaci√≥n principal">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>Huboo ¬∑ BDR</h1>
          <div class="sub">Chuleta interactiva (ES)</div>
        </div>
      </div>
      <div class="navlinks" id="navlinks">
        <a href="#inicio" class="active">üöÄ Inicio</a>
        <a href="#flujo">üì¶ Flujo log√≠stico</a>
        <a href="#icp">üéØ ICP & Cualificaci√≥n</a>
        <a href="#metricas">üìä M√©tricas & ROI</a>
        <a href="#objeciones">üß© Objeciones & Respuestas</a>
        <a href="#glosario">üìö Glosario</a>
        <a href="#pitch">üó£Ô∏è Pitch</a>
        <a href="#check">‚úÖ Checklist D√≠a 1</a>
      </div>
    </nav>

    <main>
      <header class="topbar">
        <div class="mobilebar">
          <button class="btn" id="hamburger" aria-label="Abrir men√∫">‚ò∞</button>
        </div>
        <div class="toolbar">
          <button class="btn" id="glossBtn" aria-label="Abrir glosario">‚ùì Glosario</button>
          <button class="btn" id="themeBtn" aria-label="Cambiar tema">üåô</button>
          <span class="badge" id="statusBadge">Modo oscuro</span>
        </div>
        <div class="search" role="search">
          <input id="search" type="search" placeholder="Buscar en la chuleta (p.ej. ‚ÄòSLA‚Äô, ‚ÄòAmazon‚Äô, ‚Äòdevoluciones‚Äô)" />
          <button class="btn" id="clearSearch">Limpiar</button>
        </div>
        <div class="chips" id="termChips" aria-label="T√©rminos r√°pidos"></div>
        <button class="btn" id="installBtn" hidden>‚ûï Instalar (PWA)</button>
      </header>

      <section class="grid" id="content">
        <article class="card" id="inicio">
          <h2>üöÄ Objetivo del BDR/BDM en Huboo</h2>
          <p><strong>Explicar simple</strong> la propuesta de valor, <strong>cualificar</strong> r√°pido, y <strong>generar pipeline</strong> con oportunidades reales. Vende crecimiento, no solo log√≠stica.</p>
          <div class="row" aria-label="puntos-clave">
            <span class="tag">‚öôÔ∏è Fulfilment de punta a punta</span>
            <span class="tag">üß† Tech propia + integraciones</span>
            <span class="tag">üöÄ Escalabilidad en Europa</span>
            <span class="tag">ü§ù Servicio + SLA</span>
          </div>
        </article>

        <article class="card" id="flujo">
          <h2>üì¶ Flujo log√≠stico ‚Äì de clic a entrega</h2>
          <div class="flow" id="flow">
            <div class="step">
              <header>
                <div>1) <strong>Integraci√≥n eCommerce</strong> (Shopify, Amazon, Woo, etc.)</div>
                <button aria-label="Mostrar">‚ñº</button>
              </header>
              <div class="content">Pedidos y stock sincronizados en tiempo real. Menos errores, menos retrasos.</div>
            </div>
            <div class="step">
              <header>
                <div>2) <strong>Recepci√≥n de inventario</strong> (inbound)</div>
                <button aria-label="Mostrar">‚ñº</button>
              </header>
              <div class="content">Recepci√≥n, conteo y ubicaci√≥n del stock. SLA de ingreso y visibilidad.</div>
            </div>
            <div class="step">
              <header>
                <div>3) <strong>Pick & Pack</strong></div>
                <button aria-label="Mostrar">‚ñº</button>
              </header>
              <div class="content">Recogida eficiente, empaquetado correcto, personalizaci√≥n opcional (packaging).</div>
            </div>
            <div class="step">
              <header>
                <div>4) <strong>Env√≠o & tracking</strong></div>
                <button aria-label="Mostrar">‚ñº</button>
              </header>
              <div class="content">Optimizaci√≥n de transportistas por destino/SLAs. Seguimiento para marca y cliente final.</div>
            </div>
            <div class="step">
              <header>
                <div>5) <strong>Devoluciones (RMA)</strong></div>
                <button aria-label="Mostrar">‚ñº</button>
              </header>
              <div class="content">Portal de devoluciones, reacondicionado o reposici√≥n. Impacta en NPS y repetici√≥n de compra.</div>
            </div>
          </div>
          <div class="row" style="margin-top:8px">
            <span class="pill">Dolores comunes: picos estacionales ¬∑ errores picking ¬∑ SLA incumplidos ¬∑ costes ocultos</span>
            <span class="pill">Valor: velocidad ¬∑ precisi√≥n ¬∑ escalabilidad ¬∑ experiencia cliente</span>
          </div>
        </article>

        <article class="card" id="icp">
          <h2>üéØ ICP & Cualificaci√≥n (SPICED r√°pido)</h2>
          <div class="row" style="margin-bottom:10px">
            <span class="tag">D2C moda</span>
            <span class="tag">Cosm√©tica & suplementos</span>
            <span class="tag">Electr√≥nica & gadgets</span>
            <span class="tag">Hogar & decoraci√≥n</span>
            <span class="tag">Marketplaces sellers</span>
            <span class="tag">Startups / scale-ups</span>
          </div>
          <div class="accordion">
            <details open>
              <summary>üß≠ Preguntas de apertura</summary>
              <div class="inner list">
                <div>‚Ä¢ ¬øC√≥mo gestion√°is hoy la log√≠stica (in-house, 3PL)?</div>
                <div>‚Ä¢ ¬øQu√© integra vuestra tienda: Shopify/Amazon/otro?</div>
                <div>‚Ä¢ Volumen mensual de pedidos / SKUs / destinos principales.</div>
                <div>‚Ä¢ Picos estacionales o campa√±as (Black Friday, drops‚Ä¶).</div>
              </div>
            </details>
            <details>
              <summary>üß™ Problema & Impacto</summary>
              <div class="inner list">
                <div>‚Ä¢ ¬øD√≥nde se rompen los SLAs hoy? (ingreso stock, preparaci√≥n, transporte).</div>
                <div>‚Ä¢ ¬øTasa de errores/devoluciones y coste asociado?</div>
                <div>‚Ä¢ ¬øC√≥mo afecta a NPS, repetici√≥n y CAC/LTV?</div>
              </div>
            </details>
            <details>
              <summary>üí∂ Presupuesto & Decisi√≥n</summary>
              <div class="inner list">
                <div>‚Ä¢ ¬øQu√© presupuesto tienen para fulfilment por pedido?</div>
                <div>‚Ä¢ ¬øQui√©n decide el cambio de 3PL y en qu√© plazo?</div>
                <div>‚Ä¢ Pr√≥ximos hitos (rondas, expansiones, nuevos pa√≠ses).</div>
              </div>
            </details>
          </div>
        </article>

        <article class="card" id="metricas">
          <h2>üìä M√©tricas que importan + mini ROI</h2>
          <div class="kpi">
            <div class="item"><strong>Tiempo a entrega</strong><br><span class="sub">% entregas D+1 / D+2</span></div>
            <div class="item"><strong>Exactitud picking</strong><br><span class="sub">Errores por 1.000 pedidos</span></div>
            <div class="item"><strong>Coste por pedido</strong><br><span class="sub">Almacenaje + pick/pack + transporte</span></div>
            <div class="item"><strong>NPS / CSAT</strong><br><span class="sub">Impacto post-venta y devoluciones</span></div>
          </div>
          <div style="margin-top:10px" class="accordion">
            <details>
              <summary>üßÆ Calculadora r√°pida de ROI</summary>
              <div class="inner">
                <label>Pedidos/mes <input id="orders" type="number" min="0" value="3000"></label>
                <label style="margin-left:8px">Ahorro/pedido (‚Ç¨) <input id="save" type="number" min="0" step="0.1" value="0.6"></label>
                <button class="btn" id="calc">Calcular</button>
                <span id="roi" class="pill" style="margin-left:8px">‚Äî</span>
              </div>
            </details>
          </div>
        </article>

        <article class="card" id="objeciones">
          <h2>üß© Objeciones comunes & c√≥mo responder</h2>
          <div class="accordion">
            <details open>
              <summary>‚ÄúSomos peque√±os, a√∫n no necesitamos 3PL‚Äù</summary>
              <div class="inner">Empieza cuando el coste variable por pedido sea menor que tu coste interno. Adem√°s, te permite absorber picos sin contratar ni alquilar m√°s espacio.</div>
            </details>
            <details>
              <summary>‚ÄúNos preocupa perder control de la experiencia‚Äù</summary>
              <div class="inner">Panel con trazabilidad, reglas de transporte y opciones de branding en packaging. Mantienes visibilidad sin el dolor operativo.</div>
            </details>
            <details>
              <summary>‚ÄúEl cambio es arriesgado‚Äù</summary>
              <div class="inner">Onboarding por fases (SKU cr√≠ticos primero), m√©tricas semanales y plan de salida sin lock-in a largo plazo.</div>
            </details>
            <details>
              <summary>‚ÄúEl precio del env√≠o es alto‚Äù</summary>
              <div class="inner">Optimizaci√≥n por carril y volumen agregado multi-cliente ‚Üí mejores tarifas promedio sin perder SLA.</div>
            </details>
          </div>
        </article>

        <article class="card" id="glosario">
          <h2>üìö Glosario esencial (click para explicar)</h2>
          <p class="sub">Pulsa sobre cualquier acr√≥nimo subrayado o el√≠gelo en los chips superiores. Cada t√©rmino incluye una analog√≠a deportiva para explicarlo con claridad.</p>
          <div class="glossary-tools">
            <input id="glossarySearch" type="search" placeholder="Buscar t√©rmino: p.ej. 3PL, SLA, NPS, SKU...">
            <button class="btn" id="glossaryClear">Limpiar</button>
          </div>
          <div class="list" id="glossaryList"></div>
        </article>

        <article class="card" id="pitch">
          <h2>üó£Ô∏è Elevator pitch (copiar)</h2>
          <p id="pitchTxt"><strong>Huboo</strong> ayuda a marcas de eCommerce a crecer eliminando la fricci√≥n log√≠stica. Almacenamos, preparamos y enviamos pedidos por toda Europa con integraciones nativas (Shopify, Amazon y m√°s), visibilidad total y SLAs exigentes. T√∫ te enfocas en vender; nosotros en que cada entrega llegue r√°pido y sin errores.</p>
          <button class="copy" data-copy="pitchTxt">Copiar pitch</button>
        </article>

        <article class="card" id="check">
          <h2>‚úÖ Checklist ‚Äì D√≠a 1 (se guarda en tu m√≥vil)</h2>
          <div class="list" id="todo">
            <label class="check"><input type="checkbox" data-key="todo-repasar-propuesta">Repasar propuesta de valor en 1 frase</label>
            <label class="check"><input type="checkbox" data-key="todo-crm">Acceso al CRM y vistas de pipeline</label>
            <label class="check"><input type="checkbox" data-key="todo-casos">Pedir 2 casos de √©xito locales</label>
            <label class="check"><input type="checkbox" data-key="todo-pitch">Practicar pitch 60 segundos</label>
            <label class="check"><input type="checkbox" data-key="todo-icp">Lista de 30 cuentas ICP prioritarias</label>
            <label class="check"><input type="checkbox" data-key="todo-guiones">Guiones para cold call & email</label>
          </div>
        </article>
      </section>

      <footer class="foot">Hecho para tu primer d√≠a ‚Äî guarda como app (PWA) con ‚ÄúA√±adir a pantalla de inicio‚Äù.</footer>
    </main>
  </div>

  <script>
    // =================== THEME ===================
    const themeBtn = document.getElementById('themeBtn');
    const statusBadge = document.getElementById('statusBadge');
    function applyTheme(mode){
      if(mode==='light'){ document.body.classList.add('light'); statusBadge.textContent='Modo claro'; themeBtn.textContent='üåû'}
      else { document.body.classList.remove('light'); statusBadge.textContent='Modo oscuro'; themeBtn.textContent='üåô'}
      localStorage.setItem('theme', mode);
    }
    applyTheme(localStorage.getItem('theme')||'dark');
    themeBtn.addEventListener('click',()=>{
      const next = document.body.classList.contains('light')?'dark':'light';
      applyTheme(next);
    });

    // =================== NAV / HAMBURGER ===================
    const sidebar = document.getElementById('sidebar');
    const hamburger = document.getElementById('hamburger');
    if(hamburger){ hamburger.addEventListener('click',()=> sidebar.classList.toggle('open')); }
    document.querySelectorAll('#navlinks a').forEach(a=>a.addEventListener('click',()=> sidebar.classList.remove('open')));

    // =================== ROI CALCULATOR ===================
    const calcBtn = document.getElementById('calc');
    if(calcBtn){
      calcBtn.addEventListener('click',()=>{
        const orders = parseFloat(document.getElementById('orders').value||0);
        const save = parseFloat(document.getElementById('save').value||0);
        const monthly = orders * save;
        const yearly = monthly * 12;
        const roiEl = document.getElementById('roi');
        roiEl.textContent = `Ahorro estimado: ‚Ç¨${monthly.toLocaleString()} / mes ¬∑ ‚Ç¨${yearly.toLocaleString()} / a√±o`;
      });
    }

    // =================== FLOW TOGGLES ===================
    document.querySelectorAll('.step header button').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const content = btn.parentElement.nextElementSibling;
        const isOpen = content.style.display==='block';
        content.style.display = isOpen?'none':'block';
        btn.textContent = isOpen?'‚ñº':'‚ñ≤';
      })
    })

    // =================== COPY BUTTONS ===================
    function copyFrom(id){
      const txt = document.getElementById(id).innerText.trim();
      navigator.clipboard.writeText(txt).then(()=>{
        const b = document.querySelector(`[data-copy="${id}"]`);
        if(b){ const prev=b.textContent; b.textContent='Copiado ‚úÖ'; setTimeout(()=>b.textContent=prev,1200); }
      })
    }
    document.querySelectorAll('.copy').forEach(b=> b.addEventListener('click',()=> copyFrom(b.dataset.copy)));

    // =================== SEARCH FILTER ===================
    const q = document.getElementById('search');
    const clearSearch = document.getElementById('clearSearch');
    const cards = Array.from(document.querySelectorAll('.card'));
    function filter(){
      const term = (q.value||'').toLowerCase();
      cards.forEach(c=>{
        const hit = c.innerText.toLowerCase().includes(term);
        c.style.display = hit? 'block':'none';
      })
    }
    if(q){ q.addEventListener('input', filter); }
    if(clearSearch){ clearSearch.addEventListener('click', ()=>{ q.value=''; filter(); q.focus();}); }

    // =================== CHECKLIST PERSISTENCE ===================
    document.querySelectorAll('#todo input[type="checkbox"]').forEach(cb=>{
      const k = cb.dataset.key;
      const saved = localStorage.getItem(k);
      if(saved==='1') cb.checked = true;
      cb.addEventListener('change',()=> localStorage.setItem(k, cb.checked?'1':'0'));
    })

    // =================== PWA INSTALL ===================
    let deferredPrompt; const installBtn = document.getElementById('installBtn');
    window.addEventListener('beforeinstallprompt', (e)=>{ e.preventDefault(); deferredPrompt = e; installBtn.hidden=false;});
    if(installBtn){ installBtn.addEventListener('click', async ()=>{ if(!deferredPrompt) return; deferredPrompt.prompt(); await deferredPrompt.userChoice; deferredPrompt=null; installBtn.hidden=true; }); }

    // =================== ACTIVE NAV HIGHLIGHT ===================
    const sections = cards.map(c=> c.id);
    function onScroll(){
      const pos = window.scrollY + 120;
      let current = sections[0];
      sections.forEach(id=>{
        const el = document.getElementById(id);
        if(el && el.offsetTop <= pos) current = id;
      });
      document.querySelectorAll('#navlinks a').forEach(a=>{
        a.classList.toggle('active', a.getAttribute('href')==="#"+current);
      })
    };
    document.addEventListener('scroll', onScroll, {passive:true});
    onScroll();

    // =================== GLOSSARY (TERMS) ===================
    const TERMS = {
      "NPS": {t:"Net Promoter Score", d:"√çndice de lealtad (‚àí100 a +100) basado en encuestas 0‚Äì10. F√≥rmula: %Promotores (9‚Äì10) ‚àí %Detractores (0‚Äì6).", h:"Mejor NPS ‚áí m√°s repetici√≥n y referidos; baja el coste de adquisici√≥n en el tiempo.", e:"Subir NPS de 45 a 55 puede elevar reviews y repetici√≥n, impactando ingresos.", s:"Como la afici√≥n de un club: si la mayor√≠a anima (promotores) y pocos pitan (detractores), el ambiente impulsa al equipo (ventas)."},
      "CSAT": {t:"Customer Satisfaction Score", d:"Satisfacci√≥n media en una interacci√≥n (p.ej., post‚Äëentrega).", h:"Sirve para controlar la calidad del servicio en puntos espec√≠ficos del journey.", e:"CSAT de 4,6/5 en devoluciones reduce tickets repetidos.", s:"Puntuaci√≥n del √°rbitro en una jugada concreta: mide ese momento, no todo el partido."},
      "SLA": {t:"Service Level Agreement", d:"Compromisos de servicio (tiempos, exactitud, nivel de servicio).", h:"Convertimos promesas en m√©tricas: ingreso de stock, preparaci√≥n, corte diario y entrega.", e:"SLA de ingreso: stock disponible en < 24h desde recepci√≥n.", s:"Reglas del partido: tiempos y objetivos acordados; si no se cumplen, hay falta/penalizaci√≥n."},
      "3PL": {t:"Third‚ÄëParty Logistics", d:"Proveedor externo que gestiona almacenaje, preparaci√≥n y env√≠o.", h:"Externalizas la complejidad log√≠stica y pagas por pedido/volumen.", e:"Migrar a 3PL reduce CAPEX y acelera expansi√≥n a nuevos pa√≠ses.", s:"Como contratar un staff externo para entrenamientos y viajes del club, mientras el equipo se centra en jugar (vender)."},
      "4PL": {t:"Fourth‚ÄëParty Logistics", d:"Orquestador que dise√±a y gestiona la cadena coordinando varios 3PL/carriers.", h:"Una ‚Äòcapa de control‚Äô para redes complejas multi‚Äëpa√≠s.", e:"Marca global usa 4PL para consolidar datos y negociar tarifas.", s:"El director deportivo que coordina entrenadores, cantera y log√≠stica a nivel club."},
      "SKU": {t:"Stock Keeping Unit", d:"Identificador √∫nico por variante de producto.", h:"Clave para exactitud de inventario y an√°lisis por rotaci√≥n.", e:"100 SKUs y 3.000 pedidos/mes ‚áí complejidad media.", s:"El dorsal √∫nico de cada jugador/variante."},
      "WMS": {t:"Warehouse Management System", d:"Software de operaciones de almac√©n.", h:"Control en tiempo real y menos errores de preparaci√≥n.", e:"WMS con radiofrecuencia mejora exactitud de picking.", s:"El tablero t√°ctico del entrenador: qui√©n se mueve, d√≥nde est√° cada pieza."},
      "OMS": {t:"Order Management System", d:"Sistema que centraliza y enruta pedidos entre canales.", h:"Unifica Shopify, Amazon y otros en un solo flujo.", e:"OMS prioriza mismo‚Äëd√≠a si el pedido entra antes del cut‚Äëoff.", s:"El entrenador que decide la pr√≥xima jugada y a qu√© banda va el bal√≥n (canal)."},
      "RMA": {t:"Return Merchandise Authorization", d:"Proceso autorizado de devoluci√≥n.", h:"Devoluciones fluidas mejoran NPS y recuperan margen.", e:"Portal RMA reduce contactos a soporte 30%.", s:"Saque lateral bien gestionado: el bal√≥n sale, vuelve con protocolo claro y el juego sigue."},
      "OOS": {t:"Out‚Äëof‚ÄëStock", d:"Ruptura de stock.", h:"Plan de reabastecimiento por rotaci√≥n/lead time.", e:"OOS en top‚Äëseller afecta AOV y ranking.", s:"Jugar sin tu delantero titular: baja rendimiento y resultados."},
      "D2C": {t:"Direct‚Äëto‚ÄëConsumer", d:"Venta directa de la marca al consumidor.", h:"M√°s control de datos, m√°rgenes y experiencia.", e:"Necesita devoluciones simples y env√≠os D+1.", s:"Venta de entradas directamente del club al aficionado, sin intermediarios."},
      "MOQ": {t:"Minimum Order Quantity", d:"Cantidad m√≠nima por proveedor.", h:"Impacta cash‚Äëflow y almacenamiento.", e:"Reducir MOQ libera capital.", s:"N√∫mero m√≠nimo de camisetas que debes pedir para el equipo."},
      "AOV": {t:"Average Order Value", d:"Valor medio de pedido.", h:"Mejora con bundles y env√≠os r√°pidos.", e:"AOV sube con packs y D+1.", s:"Promedio de goles por partido: subirlo mejora resultados."},
      "ASP": {t:"Average Selling Price", d:"Precio medio de venta.", h:"√ötil para mix y m√°rgenes.", e:"ASP alto exige mejor packaging y transporte.", s:"Precio medio de las entradas vendidas en la temporada."},
      "GMV": {t:"Gross Merchandise Value", d:"Valor bruto transaccionado.", h:"Indica tama√±o de operaci√≥n.", e:"GMV ‚Ç¨1M/mes ‚áí 3PL escalable.", s:"Total de puntos anotados por todos los equipos del torneo: volumen bruto."},
      "CLTV": {t:"Customer Lifetime Value", d:"Ingresos netos esperados por cliente.", h:"Mejora con log√≠stica fiable.", e:"Mejor log√≠stica ‚áí mayor CLTV.", s:"Abono de temporada: cuanto m√°s contento el fan, m√°s a√±os renueva."},
      "LTV": {t:"Lifetime Value", d:"Sin√≥nimo de CLTV.", h:"‚Äî", e:"‚Äî", s:"‚Äî"},
      "CAC": {t:"Customer Acquisition Cost", d:"Coste de captar un cliente.", h:"NPS alto reduce CAC efectivo.", e:"M√°s referidos ‚áí menos ads.", s:"Coste de captar nuevos abonados: si los fans recomiendan, gastas menos en publicidad."},
      "Lead time": {t:"Tiempo de ciclo", d:"Tiempo desde pedido hasta disponibilidad/entrega.", h:"Reducirlo sube conversi√≥n.", e:"Ingreso stock <24h + cut‚Äëoff 16:00 ‚áí D+1.", s:"Tiempo desde que se arma la jugada hasta que se marca el gol."},
      "Cut‚Äëoff": {t:"Hora de corte", d:"√öltima hora para procesar hoy.", h:"Define D0/D+1.", e:"Cut‚Äëoff 16:00 ‚áí pedidos 15:59 salen hoy.", s:"Hora l√≠mite para inscribir jugadores antes del partido."},
      "Carrier": {t:"Transportista", d:"Empresa de paqueter√≠a.", h:"Optimiza por destino y SLA.", e:"Multi‚Äëcarrier para resiliencia.", s:"Autob√∫s oficial y compa√±√≠as de viaje del equipo."},
      "Reverse logistics": {t:"Log√≠stica inversa", d:"Flujo de devoluciones y reparaciones.", h:"Impacta NPS y coste.", e:"Clasificaci√≥n y reacondicionado reducen p√©rdidas.", s:"Cuando el bal√≥n vuelve al campo: hay que reubicarlo y reanudar el juego sin fricci√≥n."}
    };

    // ===== Build glossary list =====
    function buildGlossary(){
      const list = document.getElementById('glossaryList');
      if(!list) return;
      const keys = Object.keys(TERMS).sort((a,b)=> a.localeCompare(b));
      list.innerHTML = '';
      keys.forEach(k=>{
        const t = TERMS[k];
        const div = document.createElement('div');
        div.className = 'gitem';
        div.innerHTML = `<div class="gtitle"><button class="def" data-key="${k}">${k}</button> ‚Äî ${t.t}</div>
                         <div class="gdesc sub">${t.d}</div>`;
        list.appendChild(div);
      });
    }

    // ===== Chips in topbar =====
    const termChips = document.getElementById('termChips');
    function buildChips(){
      if(!termChips) return;
      termChips.innerHTML = '';
      Object.keys(TERMS).sort().forEach(k=>{
        const b = document.createElement('button');
        b.className='chip'; b.textContent=k; b.dataset.key=k;
        b.addEventListener('click', ()=> openTerm(k));
        termChips.appendChild(b);
      })
    }

    // ===== Wrap terms in content (safe) =====
    function unwrapDefs(){
      document.querySelectorAll('.def').forEach(el=>{
        const text = document.createTextNode(el.textContent);
        el.replaceWith(text);
      });
    }
    function escapeRegex(s){ return s.replace(/[.*+?^${}()|[\]\\]/g,'\\$&'); }
    function wrapTerms(){
      const container = document.getElementById('content');
      if(!container) return;
      unwrapDefs(); // avoid nesting
      const keys = Object.keys(TERMS).sort((a,b)=> b.length - a.length);
      const walker = document.createTreeWalker(container, NodeFilter.SHOW_TEXT, {
        acceptNode: (n)=>{
          if(!n.nodeValue.trim()) return NodeFilter.FILTER_REJECT;
          const p = n.parentElement;
          if(!p) return NodeFilter.FILTER_REJECT;
          if(['SCRIPT','STYLE','BUTTON','INPUT','TEXTAREA'].includes(p.tagName)) return NodeFilter.FILTER_REJECT;
          return NodeFilter.FILTER_ACCEPT;
        }
      });
      const nodes = [];
      while(walker.nextNode()) nodes.push(walker.currentNode);
      nodes.forEach(node=>{
        let html = node.nodeValue;
        let changed = false;
        keys.forEach(k=>{
          const re = new RegExp(`\\b${escapeRegex(k)}\\b`,'g');
          html = html.replace(re, (m)=>{ changed=true; return `<button class="def" data-key="${k}">${m}</button>`; });
        });
        if(changed){
          const span = document.createElement('span');
          span.innerHTML = html;
          node.parentNode.replaceChild(span, node);
        }
      });
    }

    // ===== Popover =====
    const overlayEl = document.createElement('div'); overlayEl.id='overlay'; overlayEl.className='overlay hidden';
    const popEl = document.createElement('aside'); popEl.id='pop'; popEl.className='pop hidden'; popEl.setAttribute('role','dialog'); popEl.setAttribute('aria-modal','true');
    popEl.innerHTML = `
      <div class="h"><strong id="popTitle"></strong><button class="btn" id="popClose" aria-label="Cerrar">‚úï</button></div>
      <div class="b" id="popBody"></div>
      <div class="b" style="display:flex;gap:8px;flex-wrap:wrap">
        <button class="btnlink" id="copyExpl">Copiar explicaci√≥n</button>
        <a class="btnlink" href="#glosario" id="openGlossary">Ver en glosario</a>
      </div>
    `;
    document.body.appendChild(overlayEl); document.body.appendChild(popEl);

    function openTerm(key){
      const t = TERMS[key]; if(!t) return;
      document.getElementById('popTitle').textContent = `${key} ¬∑ ${t.t}`;
      document.getElementById('popBody').innerHTML = `
        <div><strong>Definici√≥n:</strong> ${t.d}</div>
        <div style="margin-top:6px"><strong>C√≥mo explicarlo al cliente:</strong> ${t.h}</div>
        ${t.e? `<div style="margin-top:6px"><strong>Ejemplo:</strong> ${t.e}</div>`:''}
        ${t.s? `<div style="margin-top:6px"><strong>Analog√≠a deportiva:</strong> ${t.s}</div>`:''}
      `;
      overlayEl.classList.remove('hidden'); popEl.classList.remove('hidden');
    }
    function closePop(){ overlayEl.classList.add('hidden'); popEl.classList.add('hidden'); }

    document.addEventListener('click',(e)=>{
      const btn = e.target.closest('.def');
      if(btn && btn.dataset.key){ openTerm(btn.dataset.key); }
    });
    overlayEl.addEventListener('click', closePop);
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closePop(); });
    document.addEventListener('click',(e)=>{ if(e.target && e.target.id==='popClose') closePop(); });
    document.addEventListener('click',(e)=>{
      if(e.target && e.target.id==='copyExpl'){
        const txt = document.getElementById('popBody').innerText.trim();
        navigator.clipboard.writeText(txt);
        e.target.textContent='¬°Copiado!'; setTimeout(()=> e.target.textContent='Copiar explicaci√≥n', 1200);
      }
    });

    // ===== Glossary page controls =====
    function buildGlossaryAndChips(){ buildGlossary(); buildChips(); wrapTerms(); }
    buildGlossaryAndChips();

    const glossBtn = document.getElementById('glossBtn');
    if(glossBtn){ glossBtn.addEventListener('click', ()=>{ location.hash = '#glosario'; }); }

    const gSearch = document.getElementById('glossarySearch');
    const gClear = document.getElementById('glossaryClear');
    function filterGlossary(){
      const term = (gSearch.value||'').toLowerCase();
      document.querySelectorAll('#glossaryList .gitem').forEach(item=>{
        const text = item.innerText.toLowerCase();
        item.style.display = text.includes(term)?'block':'none';
      });
    }
    if(gSearch){ gSearch.addEventListener('input', filterGlossary); }
    if(gSearch){ gSearch.addEventListener('keydown', (e)=>{
      if(e.key==='Enter'){
        const first = Array.from(document.querySelectorAll('#glossaryList .gitem')).find(x=> x.style.display!== 'none');
        if(first){ const key = first.querySelector('.def')?.dataset.key; if(key) openTerm(key); }
      }
    });}
    if(gClear){ gClear.addEventListener('click', ()=>{ gSearch.value=''; filterGlossary(); gSearch.focus(); }); }
  </script>
</body>
</html>
